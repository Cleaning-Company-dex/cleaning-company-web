{% extends "base.html" %}

{% block title %}Get Quote - {{ business_name }}{% endblock %}

{% block content %}
<div class="card" style="max-width: 600px; margin: 0 auto;">
    <h2>Get Your Free Cleaning Quote</h2>
    <p style="color: #666; margin-bottom: 2rem;">Fill out the form below to receive an instant quote</p>
    
    <form method="POST" action="{{ url_for('public.quote') }}">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
        
        <div class="form-group">
            <label for="name">Full Name *</label>
            <input type="text" class="form-control" id="name" name="name" required 
                   value="{{ form_data.name if form_data else '' }}">
        </div>
        
        <div class="form-group">
            <label for="email">Email Address *</label>
            <input type="email" class="form-control" id="email" name="email" required
                   value="{{ form_data.email if form_data else '' }}">
        </div>
        
        <div class="form-group">
            <label for="phone">Phone Number *</label>
            <input type="tel" class="form-control" id="phone" name="phone" required
                   placeholder="(555) 123-4567"
                   value="{{ form_data.phone if form_data else '' }}">
        </div>
        
        <div class="form-group">
            <label for="property_type">Property Type *</label>
            <select class="form-control" id="property_type" name="property_type" required>
                <option value="">Select property type...</option>
                <option value="office">Office Building</option>
                <option value="retail">Retail Store</option>
                <option value="medical">Medical Facility</option>
                <option value="restaurant">Restaurant</option>
                <option value="residential">Residential</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="square_feet">Square Feet *</label>
            <input type="number" class="form-control" id="square_feet" name="square_feet" 
                   min="100" max="100000" required
                   placeholder="Enter square footage"
                   value="{{ form_data.square_feet if form_data else '' }}">
            <small style="color: #666;">Estimate is fine - we'll confirm during consultation</small>
        </div>
        
        <div class="form-group">
            <label for="service_type">Service Frequency *</label>
            <select class="form-control" id="service_type" name="service_type" required>
                <option value="one_time">One-Time Cleaning</option>
                <option value="weekly" selected>Weekly</option>
                <option value="biweekly">Bi-Weekly</option>
                <option value="monthly">Monthly</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="special_instructions">Special Instructions (Optional)</label>
            <textarea class="form-control" id="special_instructions" name="special_instructions" 
                      rows="3" placeholder="Any special requirements or notes...">{{ form_data.special_instructions if form_data else '' }}</textarea>
        </div>
        
        <button type="submit" class="btn btn-primary" style="width: 100%; padding: 1rem; font-size: 1.1rem;">
            Get Instant Quote â†’
        </button>
    </form>
</div>

<div style="margin-top: 2rem; text-align: center;">
    <p style="color: #666;">Questions? Call us at {{ business_phone }}</p>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Format phone number as user types
document.getElementById('phone').addEventListener('input', function(e) {
    let value = e.target.value.replace(/\D/g, '');
    if (value.length >= 6) {
        value = '(' + value.slice(0,3) + ') ' + value.slice(3,6) + '-' + value.slice(6,10);
    } else if (value.length >= 3) {
        value = '(' + value.slice(0,3) + ') ' + value.slice(3);
    }
    e.target.value = value;
});
</script>
{% endblock %}